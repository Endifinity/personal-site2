function d(e){e=e||1;var t=[],n=0;function o(a){t.push(a)>1||r()}function c(){n--,r()}function r(){n<e&&t.length>0&&(t.shift()(),n++)}return[o,c]}function m(e,t){const n=t?.timeout??50,o=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,n-(Date.now()-o))}})},1)}const v=window.requestIdleCallback||m;var p=v;const f=["mouseenter","touchstart","focus"],u=new Set;function w({href:e}){try{const t=new URL(e);return window.location.origin===t.origin&&window.location.pathname!==t.pathname&&!u.has(e)}catch{}return!1}let i,s;function b(e){u.add(e.href),s.observe(e),f.map(t=>e.addEventListener(t,l,{passive:!0,once:!0}))}function y(e){s.unobserve(e),f.map(t=>e.removeEventListener(t,l))}function l({target:e}){e instanceof HTMLAnchorElement&&h(e)}async function h(e){y(e);const{href:t}=e;try{const n=await fetch(t).then(r=>r.text());i=i||new DOMParser;const o=i.parseFromString(n,"text/html"),c=Array.from(o.querySelectorAll('link[rel="stylesheet"]'));await Promise.all(c.map(r=>fetch(r.href)))}catch{}}function g({selector:e='a[href][rel~="prefetch"]',throttle:t=1}){const n=navigator.connection;if(typeof n<"u"){if(n.saveData)return Promise.reject(new Error("Cannot prefetch, Save-Data is enabled"));if(/2g/.test(n.effectiveType))return Promise.reject(new Error("Cannot prefetch, network conditions are poor"))}const[o,c]=d(t);s=s||new IntersectionObserver(r=>{r.forEach(a=>{a.isIntersecting&&a.target instanceof HTMLAnchorElement&&o(()=>h(a.target).finally(c))})}),p(()=>{const r=Array.from(document.querySelectorAll(e)).filter(w);for(const a of r)b(a)})}g({});
